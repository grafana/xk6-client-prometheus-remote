**xk6-client-prometheus-remote** `v0.4.0` is here!

This release brings significant improvements to code quality, security, developer experience, and bug fixes. The codebase has been modernized, tooling enhanced, and important compatibility issues addressed.

## New Features

### TypeScript API Declarations (#48)

Added comprehensive TypeScript type definitions (`index.d.ts`) providing:
- Full IDE autocomplete support for all APIs
- Type safety and compile-time error checking
- Inline documentation with practical examples
- Better developer experience in VS Code, WebStorm, and other modern editors

### Developer Tooling (#57)

Added a comprehensive development environment with:
- **Makefile**: Common development tasks (build, test, lint, security checks, documentation generation)
- **CONTRIBUTING.md**: Complete contribution guidelines covering:
  - Code of conduct
  - Bug reporting and feature requests
  - Development workflow
  - Testing and quality standards
  - Task documentation

### Comprehensive Smoke Test (#51)

Added a runtime verification test that ensures:
- All Go exports match TypeScript definitions
- API surface correctness across language boundaries
- Prevention of export regressions
- Documentation of expected behavior through executable tests

## Improvements

### Code Quality Enhancements (#50)

Implemented comprehensive linting with golangci-lint (40+ linters enabled):
- Added package and function documentation for all exports
- Reorganized code with proper function ordering (exported before unexported)
- Modernized codebase using Go 1.22+ features (integer range loops, automatic loop variable capture)
- Improved test infrastructure with parallel test execution
- Enhanced error handling and context propagation
- Fixed whitespace, formatting, and style consistency issues
- Pre-allocated slices for better performance
- Used standard library constants for improved maintainability

### k6 v1.4.0 Support (#53)

Updated to the latest k6 version, ensuring compatibility with the newest k6 features and improvements.

### Modernized Release Workflow (#55)

Replaced custom release workflow with the shared workflow from grafana/xk6, bringing:
- Consistency with other k6 extensions
- Streamlined release process
- Better maintainability

**Breaking Change**: Docker images will no longer be created with k6 binary built with this extension. Users should use k6's Automatic Extension Resolution feature or build with `xk6` locally if needed.

## Security

### Vulnerability Fixes (#59)

Updated `golang.org/x/crypto` from v0.43.0 to v0.45.0, addressing:
- **GO-2025-4135**: Malformed constraint causing denial of service in `golang.org/x/crypto/ssh/agent`
- **GO-2025-4134**: Unbounded memory consumption in `golang.org/x/crypto/ssh`

## Bug Fixes

### Label Ordering Compliance (#60)

Fixed label ordering in example scripts to comply with Prometheus/Thanos requirements:
- Labels are now sorted alphabetically (lexicographic order after `__name__`)
- Prevents 409 Conflict errors from Thanos
- Updated examples:
  - `examples/full_write_example.js`
  - `examples/full_read_write_example.js`
  - `examples/benchtool.js`

## Documentation

- Added comprehensive TypeScript API documentation
- Created contribution guidelines
- Updated development workflow documentation
- Added inline code examples throughout type definitions

---

For the complete list of changes, see the [full changelog](https://github.com/grafana/xk6-client-prometheus-remote/compare/v0.3.0...v0.4.0).
